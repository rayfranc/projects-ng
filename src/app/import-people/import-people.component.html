<!--
<app-select-org
fxLayout="row wrap"
fxLayout.xs="column wrap"
fxLayoutAlign="start center"
fxLayoutAlign.xs="center center"
fxLayoutGap="1em"
(paramsChange)="filtersChange($event)"
>
</app-select-org> -->


<div class="container">
  <h1 style="padding-bottom: 20px;">Importar personas</h1>
  <div class="instructions">
    <div>
      <p>
        El archivo (.json / .csv) de importación para personas debe cumplir con
        las siguientes estructuras/campos
      </p>
    </div>
    <div
    class="instructions-markdown"
      style="margin: 0"
      markdown
      [src]="'/assets/markdown/import.instructions.es.md'"
    ></div>
  </div>

  <ngx-dropzone (change)="onSelect($event)" accept=".csv,.json">
    <ngx-dropzone-label>
      <mat-icon style="font-size: 100px">person_add</mat-icon>
    </ngx-dropzone-label>
    <ngx-dropzone-preview
      *ngFor="let f of files"
      [removable]="true"
      (removed)="onRemove(f)"
    >
      <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
    </ngx-dropzone-preview>
  </ngx-dropzone>
</div>

<div *ngIf="people && people.length > 0" class="button-container">
  <button mat-raised-button (click)="saveData()" color="primary">
    Guardar
  </button>
</div>

<div
  class="mat-elevation-z4"
  *ngIf="people && people.length > 0"
  style="margin: 0 30px"
>
  <h2 style="padding: 20px">{{ org.name }}</h2>
  <table mat-table [dataSource]="dataSource">
    <!-- Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Nombre</th>
      <td mat-cell *matCellDef="let element">
        {{ element.name | titlecase }}
      </td>
    </ng-container>

    <!-- LastName1 Column -->
    <ng-container matColumnDef="lastName">
      <th mat-header-cell *matHeaderCellDef>Apellidos</th>
      <td mat-cell *matCellDef="let element">
        {{ element.lastName | titlecase }}
      </td>
    </ng-container>

    <!-- Lastname2 Column -->
    <ng-container matColumnDef="aliases">
      <th mat-header-cell *matHeaderCellDef>Aliases</th>
      <td mat-cell *matCellDef="let element">
        <div *ngFor="let alias of element.aliases">{{ alias | titlecase }}</div>
      </td>
    </ng-container>

    <!-- Country Column -->
    <ng-container matColumnDef="gender">
      <th mat-header-cell *matHeaderCellDef>Sexo</th>
      <td mat-cell *matCellDef="let element">{{ element.gender }}</td>
    </ng-container>

    <!-- Gender Column -->
    <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef>País</th>
      <td mat-cell *matCellDef="let element">{{ element.country }}</td>
    </ng-container>

    <!-- Institutional Email Column -->
    <ng-container matColumnDef="institutional_email">
      <th mat-header-cell *matHeaderCellDef>Email Institucional</th>
      <td mat-cell *matCellDef="let element">
        {{ element.institutional_email }}
      </td>
    </ng-container>

    <!-- External_Email Column -->
    <ng-container matColumnDef="emails">
      <th mat-header-cell *matHeaderCellDef>Emails</th>
      <td mat-cell *matCellDef="let element">
        <div *ngFor="let email of element.externals_email">{{ email }}</div>
      </td>
    </ng-container>

    <!-- Aliases Column -->
    <!-- <ng-container matColumnDef="aliases">
      <th mat-header-cell *matHeaderCellDef>Aliases</th>
      <td mat-cell *matCellDef="let element">
        <mat-list role="list" *ngFor="let item of element.aliases">
          <mat-list-item role="listitem">{{item}}</mat-list-item>
        </mat-list>

      </td>
    </ng-container> -->

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <mat-paginator
    #paginator
    [pageSize]="10"
    [pageSizeOptions]="[5, 10, 20]"
    showFirstLastButtons
  ></mat-paginator>
</div>

<div class="button-container">
  <button
    *ngIf="!people || people.length === 0"
    mat-raised-button
    (click)="showData()"
    color="primary"
  >
    Mostrar
  </button>
  <button mat-raised-button (click)="saveData()" color="primary">
    Guardar
  </button>
</div>
